<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CuentaMan</title>
</head>
<body>
    <ol id="lista1">
        <li>Perico</li>
        <li>Juanico</li>
        <ul>
            <li>Jose</li>
            <ul>
                <li>Roman</li>
                <li>Marco</li>
                <li>Rodrigo</li>
            </ul>
            <li>Jose</li>
            <li>Lorenzo</li>
            <ul>
                <li>Dimas</li>
                <li>Gestas</li>
                <li>Malakatos</li>
                <li>Jose</li>
                <li>Dimas</li>
                <li>Gestas</li>
            </ul>
        </ul>
        <li>Sofoclis</li>
    </ol>
    <ol id="lista2">
        <li>Periquin</li>
        <li>Sofoclis</li>
        <li>Jose</li>
        <ul>
            <li>Dimas</li>

            <li>Gestas</li>
        </ul>
    </ol>
    <script>
           function contarNombres(obj,nombre) {
            nombre=nombre.toUpperCase().trim();
            let cont=0;

            for (let i = 0; i < obj.children.length; i++) {
                contarNombres(obj.children[i],nombre);
                cont += contarNombres(obj.children[i], nombre); 
                if (obj.children[i].tagName==="LI") {
                    if (nombre === obj.children[i].innerHTML.toUpperCase()) {
                        cont++;
                    }
                }
            }

            return cont;
        }
        var contador = contarNombres(document.getElementById("lista1"),"jose");
        console.log("El nombre 'jose' aparece: " + contador + " veces");

        function asignarRecuento(obj) {
            for (let i = 0; i < obj.children.length; i++) {
                asignarRecuento(obj.children[i])
                if (obj.children[i].tagName==="LI") {
                    let nom = obj.children[i].innerHTML;
                    let vecesNom = contarNombres(document.getElementById("lista1"),nom);
                    obj.children[i].innerHTML = obj.children[i].innerHTML  + vecesNom;
                }
            }
        }
        asignarRecuento(document.getElementById("lista2"))

    </script>
</body>
</html>